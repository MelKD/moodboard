window.addEventListener("load",function(){WebFont.load({google:{families:["Cookie","Cormorant","Dancing Script","Homemade Apple","Inknut Antiqua","Inconsolata","Josefin Sans","Lora","Pacifico","Playfair Display","Quicksand","Roboto","Roboto Slab","Sacramento","Satisfy"]}});var o=new fabric.Canvas("moodCanvas");function d(){var e,t,n=document.getElementById("boardSize").value,i=document.querySelectorAll(".sidebar-wrap")[0].offsetWidth,d=0<window.innerWidth?window.innerWidth:screen.width;0<window.innerHeight?window.innerHeight:screen.height;"Square"===n?(e=d-(i+100),console.log(e),t=e):"Rectangle"===n&&(t=1.5*(e=d-(i+100))),o.setDimensions({width:e,height:t})}o.setWidth(750),o.setHeight(750),d(),window.addEventListener("resize",d);var n=document.getElementById("boardSize");function i(){var e=new fabric.Image(this,{left:10,top:10});o.add(e),o.requestRenderAll()}["Choose a layout","Square","Rectangle"].forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,n.appendChild(t)}),document.getElementById("boardSize").onchange=function(){var e,t,n,i;"Square"===this.value?(o.discardActiveObject(),t=1,n=(e=new fabric.ActiveSelection(o.getObjects(),{canvas:o})).width*t,i=e.height*t,o.setWidth(750),o.setHeight(750),e.set({left:10,top:10}),e.setCoords(),e.scaleToWidth(n).scaleToHeight(i),o.requestRenderAll(),d()):"Rectangle"===this.value&&(o.discardActiveObject(),t=.6667,n=(e=o.getObjects()).width*t,i=e.height*t,o.setWidth(500),o.setHeight(750),e.setLeft(10),e.setTop(10),e.scaleToWidth(n).scaleToHeight(i),e.setCoords(),o.requestRenderAll(),d())},document.querySelectorAll(".image-input").forEach(function(n){n.addEventListener("change",function(){var e,t=n.parentNode.id;this.files&&this.files[0]&&((e=document.createElement("img")).addEventListener("dblclick",i),e.src=URL.createObjectURL(this.files[0]),document.getElementById(t).appendChild(e)),this.style.display="none"})});var c=document.getElementById("paletteShape");["Circle","Square","Triangle"].forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,c.appendChild(t)}),document.getElementById("loadSelectedPalette").addEventListener("click",function(){var e=document.querySelectorAll(".swatch-wrap"),t=document.getElementById("paletteShape"),n=t.options[t.selectedIndex].text,i=0;e.forEach(function(e){var t=e.children[0].jscolor;"Circle"===n?o.add(new fabric.Circle({left:75*i+20,top:10,fill:"#"+t,radius:35})):"Square"===n?o.add(new fabric.Rect({left:75*i+50,top:10,fill:"#"+t,width:75,height:75})):"Triangle"===n&&o.add(new fabric.Triangle({left:75*i+50,top:10,fill:"#"+t,width:75,height:75})),i++})}),document.getElementById("addTextButton").addEventListener("click",function(){var e=new fabric.Textbox("Enter your text here",{left:50,top:50,width:150,fontFamily:"Cookie",fontSize:20});o.add(e).setActiveObject(e),document.getElementById("displayTextTools").style.display="block"});var l=document.getElementById("font-family");["Cookie","Cormorant","Dancing Script","Homemade Apple","Inconsolata","Inknut Antiqua","Josefin Sans","Lora","Pacifico","Playfair Display","Quicksand","Roboto","Roboto Slab","Sacramento","Satisfy"].forEach(function(e){var t=document.createElement("option");t.innerHTML=e,"Cookie"===(t.value=e)&&(t.selected="selected"),l.appendChild(t)}),document.getElementById("font-family").onchange=function(){o.getActiveObject().set("fontFamily",this.value),o.requestRenderAll()};var a=document.getElementById("font-size");[10,12,14,16,18,20,22,24,32,36,42,48,56,64,72].forEach(function(e){var t=document.createElement("option");t.innerHTML=e,20===(t.value=e)&&(t.selected="selected"),a.appendChild(t)}),document.getElementById("font-size").onchange=function(){o.getActiveObject().set("fontSize",this.value),o.requestRenderAll()},document.querySelectorAll(".click-text").forEach(function(e){e.addEventListener("click",function(){o.getActiveObject().set("textAlign",this.getAttribute("value")),o.requestRenderAll()})}),document.getElementById("selectTextColour").addEventListener("change",function(){var e=this.jscolor.toHEXString();o.getActiveObject().set("fill",e),o.requestRenderAll()}),document.getElementById("selectCircle").addEventListener("dblclick",function(){o.add(new fabric.Circle({left:10,top:10,fill:"#24bddf",radius:50}))}),document.getElementById("selectSquare").addEventListener("dblclick",function(){o.add(new fabric.Rect({left:10,top:10,fill:"#035177",width:50,height:50}))}),document.getElementById("selectTriangle").addEventListener("dblclick",function(){o.add(new fabric.Triangle({left:10,top:10,fill:"#24bddf",width:50,height:50}))}),document.getElementById("selectLine").addEventListener("dblclick",function(){o.add(new fabric.Line([0,100,200,200],{left:10,top:10,stroke:"#035177"}))}),document.getElementById("shapeColour").addEventListener("change",function(){o.getActiveObject().set("fill","#"+this.jscolor),o.requestRenderAll()}),document.getElementById("shapeOpacity").addEventListener("change",function(){o.getActiveObject().set("opacity",parseInt(this.value,10)/100),o.requestRenderAll()}),document.getElementById("lineColour").addEventListener("change",function(){o.getActiveObject().set("stroke","#"+this.jscolor),o.requestRenderAll()}),document.getElementById("lineWeight").addEventListener("change",function(){o.getActiveObject().set("strokeWidth",parseInt(this.value,10)),o.requestRenderAll()}),document.getElementById("sendToBack").addEventListener("click",function(){var e=o.getActiveObject();e&&(o.sendToBack(e),o.requestRenderAll())}),document.getElementById("sendBackOne").addEventListener("click",function(){var e=o.getActiveObject();e&&(o.sendBackwards(e),o.requestRenderAll())}),document.getElementById("sendForwardOne").addEventListener("click",function(){var e=o.getActiveObject();e&&(o.bringForward(e),o.requestRenderAll())}),document.getElementById("sendToFront").addEventListener("click",function(){var e=o.getActiveObject();e&&(o.bringToFront(e),o.requestRenderAll())});var r=document.getElementById("objectSize");[10,25,50,75,90,100,110,125,150,175,200].forEach(function(e){var t=document.createElement("option");t.innerHTML=e,100===(t.value=e)&&(t.selected="selected"),r.appendChild(t)}),document.getElementById("objectSize").onchange=function(){var e=this.value/100,t=o.getActiveObject(),n=t.width*e,i=t.height*e;t.scaleToWidth(n).scaleToHeight(i),o.requestRenderAll()},document.querySelectorAll(".delete-button").forEach(function(e){e.addEventListener("click",function(){var e=o.getActiveObjects();o.discardActiveObject(),e.length&&o.remove.apply(o,e),o.requestRenderAll()})}),document.querySelectorAll(".clear-button").forEach(function(e){e.addEventListener("click",function(){var e=o.getObjects();o.remove.apply(o,e),o.requestRenderAll()})});var s=document.createElement("a");s.innerHTML="Download .jpeg",s.addEventListener("click",function(e){o.setBackgroundColor("rgba(255, 255, 255, 1)",o.renderAll.bind(o));var t=document.getElementById("boardSize");"Square"===t.value?s.href=o.toDataURL({multiplier:1.44}):"Rectangle"===t.value&&(s.href=o.toDataURL({multiplier:2.206})),s.download="mymoodboard.jpg"},!1),document.getElementById("saveJpegButton").appendChild(s);var u=document.createElement("a");u.innerHTML="Download .png",u.addEventListener("click",function(e){o.setBackgroundColor("rgba(255, 255, 255, 0)",o.renderAll.bind(o));var t=document.getElementById("boardSize");"Square"===t.value?u.href=o.toDataURL({multiplier:1.44}):"Rectangle"===t.value&&(u.href=o.toDataURL({multiplier:2.206})),u.download="mymoodboard.png"},!1),document.getElementById("savePngButton").appendChild(u)});
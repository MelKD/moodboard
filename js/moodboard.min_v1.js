window.addEventListener("load",function(){function a(){var a=document.getElementById("boardSize").value,b=document.querySelectorAll(".sidebar-wrap"),d=b[0].offsetWidth,e=0<window.innerWidth?window.innerWidth:screen.width,f=0<window.innerHeight?window.innerHeight:screen.height;if("Square"===a){var g=e-(d+100);console.log(g);var h=g}else if("Rectangle"===a)var g=e-(d+100),h=1.5*g;c.setDimensions({width:g,height:h})}function b(){var a=this,b=new fabric.Image(a,{left:10,top:10});c.add(b),c.requestRenderAll()}WebFont.load({google:{families:["Cookie","Cormorant","Dancing Script","Homemade Apple","Inknut Antiqua","Inconsolata","Josefin Sans","Lora","Pacifico","Playfair Display","Quicksand","Roboto","Roboto Slab","Sacramento","Satisfy"]}});var c=new fabric.Canvas("moodCanvas");c.setWidth(750),c.setHeight(750),a(),window.addEventListener("resize",a);var d=document.getElementById("boardSize");["Choose a layout","Square","Rectangle"].forEach(function(a){var b=document.createElement("option");b.innerHTML=a,b.value=a,d.appendChild(b)}),document.getElementById("boardSize").onchange=function(){if("Square"===this.value){c.discardActiveObject();var b=new fabric.ActiveSelection(c.getObjects(),{canvas:c}),d=1,e=b.width*d,f=b.height*d;c.setWidth(750),c.setHeight(750),b.set({left:10,top:10}),b.setCoords(),b.scaleToWidth(e).scaleToHeight(f),c.requestRenderAll(),a()}else if("Rectangle"===this.value){c.discardActiveObject();var b=c.getObjects(),d=.6667,e=b.width*d,f=b.height*d;c.setWidth(500),c.setHeight(750),b.setLeft(10),b.setTop(10),b.scaleToWidth(e).scaleToHeight(f),b.setCoords(),c.requestRenderAll(),a()}};var e=document.querySelectorAll(".image-input");e.forEach(a=>{a.addEventListener("change",function(){var c=a.parentNode,d=c.id;if(this.files&&this.files[0]){var e=document.createElement("img");e.addEventListener("dblclick",b),e.src=URL.createObjectURL(this.files[0]),document.getElementById(d).appendChild(e)}this.style.display="none"})});var f=document.getElementById("paletteShape");["Circle","Square","Triangle"].forEach(function(a){var b=document.createElement("option");b.innerHTML=a,b.value=a,f.appendChild(b)});var g=document.getElementById("loadSelectedPalette");g.addEventListener("click",function(){var a=document.querySelectorAll(".swatch-wrap"),b=document.getElementById("paletteShape"),d=b.options[b.selectedIndex].text,e=0;a.forEach(function(a){var b=a.children[0].jscolor;"Circle"===d?c.add(new fabric.Circle({left:75*e+20,top:10,fill:"#"+b,radius:35})):"Square"===d?c.add(new fabric.Rect({left:75*e+50,top:10,fill:"#"+b,width:75,height:75})):"Triangle"===d&&c.add(new fabric.Triangle({left:75*e+50,top:10,fill:"#"+b,width:75,height:75})),e++})});var h=document.getElementById("addTextButton");h.addEventListener("click",function(){var a=new fabric.Textbox("Enter your text here",{left:50,top:50,width:150,fontFamily:"Cookie",fontSize:20});c.add(a).setActiveObject(a);var b=document.getElementById("displayTextTools");b.style.display="block"});var i=document.getElementById("font-family");["Cookie","Cormorant","Dancing Script","Homemade Apple","Inconsolata","Inknut Antiqua","Josefin Sans","Lora","Pacifico","Playfair Display","Quicksand","Roboto","Roboto Slab","Sacramento","Satisfy"].forEach(function(a){var b=document.createElement("option");b.innerHTML=a,b.value=a,"Cookie"===a&&(b.selected="selected"),i.appendChild(b)}),document.getElementById("font-family").onchange=function(){c.getActiveObject().set("fontFamily",this.value),c.requestRenderAll()};var j=document.getElementById("font-size");[10,12,14,16,18,20,22,24,32,36,42,48,56,64,72].forEach(function(a){var b=document.createElement("option");b.innerHTML=a,b.value=a,20===a&&(b.selected="selected"),j.appendChild(b)}),document.getElementById("font-size").onchange=function(){c.getActiveObject().set("fontSize",this.value),c.requestRenderAll()};var k=document.querySelectorAll(".click-text");k.forEach(a=>{a.addEventListener("click",function(){c.getActiveObject().set("textAlign",this.getAttribute("value")),c.requestRenderAll()})});var l=document.getElementById("selectTextColour");l.addEventListener("change",function(){var a=this.jscolor.toHEXString();c.getActiveObject().set("fill",a),c.requestRenderAll()});var m=document.getElementById("selectCircle");m.addEventListener("dblclick",function(){c.add(new fabric.Circle({left:10,top:10,fill:"#24bddf",radius:50}))});var n=document.getElementById("selectSquare");n.addEventListener("dblclick",function(){c.add(new fabric.Rect({left:10,top:10,fill:"#035177",width:50,height:50}))});var o=document.getElementById("selectTriangle");o.addEventListener("dblclick",function(){c.add(new fabric.Triangle({left:10,top:10,fill:"#24bddf",width:50,height:50}))});var p=document.getElementById("selectLine");p.addEventListener("dblclick",function(){c.add(new fabric.Line([0,100,200,200],{left:10,top:10,stroke:"#035177"}))});var q=document.getElementById("shapeColour");q.addEventListener("change",function(){var a=c.getActiveObject();a.set("fill","#"+this.jscolor),c.requestRenderAll()});var r=document.getElementById("shapeOpacity");r.addEventListener("change",function(){var a=c.getActiveObject();a.set("opacity",parseInt(this.value,10)/100),c.requestRenderAll()});var s=document.getElementById("lineColour");s.addEventListener("change",function(){var a=c.getActiveObject();a.set("stroke","#"+this.jscolor),c.requestRenderAll()});var t=document.getElementById("lineWeight");t.addEventListener("change",function(){var a=c.getActiveObject();a.set("strokeWidth",parseInt(this.value,10)),c.requestRenderAll()});var u=document.getElementById("sendToBack");u.addEventListener("click",function(){var a=c.getActiveObject();a&&(c.sendToBack(a),c.requestRenderAll())});var v=document.getElementById("sendBackOne");v.addEventListener("click",function(){var a=c.getActiveObject();a&&(c.sendBackwards(a),c.requestRenderAll())});var w=document.getElementById("sendForwardOne");w.addEventListener("click",function(){var a=c.getActiveObject();a&&(c.bringForward(a),c.requestRenderAll())});var x=document.getElementById("sendToFront");x.addEventListener("click",function(){var a=c.getActiveObject();a&&(c.bringToFront(a),c.requestRenderAll())});var y=document.getElementById("objectSize");[10,25,50,75,90,100,110,125,150,175,200].forEach(function(a){var b=document.createElement("option");b.innerHTML=a,b.value=a,100===a&&(b.selected="selected"),y.appendChild(b)}),document.getElementById("objectSize").onchange=function(){var a=this.value/100,b=c.getActiveObject(),d=b.width*a,e=b.height*a;b.scaleToWidth(d).scaleToHeight(e),c.requestRenderAll()};var z=document.querySelectorAll(".delete-button");z.forEach(a=>{a.addEventListener("click",function(){var a=c.getActiveObjects();c.discardActiveObject(),a.length&&c.remove.apply(c,a),c.requestRenderAll()})});var A=document.querySelectorAll(".clear-button");A.forEach(a=>{a.addEventListener("click",function(){var a=c.getObjects();c.remove.apply(c,a),c.requestRenderAll()})});var B=document.createElement("a");B.innerHTML="Download .jpeg",B.addEventListener("click",function(){c.setBackgroundColor("rgba(255, 255, 255, 1)",c.renderAll.bind(c));var a=document.getElementById("boardSize");"Square"===a.value?B.href=c.toDataURL({multiplier:1.44}):"Rectangle"===a.value&&(B.href=c.toDataURL({multiplier:2.206})),B.download="mymoodboard.jpg"},!1),document.getElementById("saveJpegButton").appendChild(B);var C=document.createElement("a");C.innerHTML="Download .png",C.addEventListener("click",function(){c.setBackgroundColor("rgba(255, 255, 255, 0)",c.renderAll.bind(c));var a=document.getElementById("boardSize");"Square"===a.value?C.href=c.toDataURL({multiplier:1.44}):"Rectangle"===a.value&&(C.href=c.toDataURL({multiplier:2.206})),C.download="mymoodboard.png"},!1),document.getElementById("savePngButton").appendChild(C)});